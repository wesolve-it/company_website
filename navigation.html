<div 
  x-data="{ open: false, isScrolled: false }" 
  x-init="window.addEventListener('scroll', () => { isScrolled = window.scrollY > 10 })"
  x-effect="document.body.classList.toggle('overflow-hidden', open)"
  @keydown.escape.window="open = false"
  @click.away="open = false"
  :class="isScrolled ? 'shadow-md bg-wesolve-gray-50' : 'bg-wesolve-gray-50'" 
  class="w-full z-50 fixed top-0 transition-all duration-300 ease-in-out"
>
  <div 
    :class="isScrolled ? 'py-4' : 'py-6'" 
    class="container mx-auto flex items-center justify-between px-4 max-w-screen-xl transition-all duration-300 ease-in-out"
  >
    <!-- Logo -->
    <a href="/" onclick="navigateTo(event, '/')">
      <img src="../assets/img/wesolve_green.svg" alt="WESOLVE-IT Logo" class="h-8 -ml-7 overflow-hidden">
    </a>

    <!-- Navigation Links -->
    <nav class="hidden md:flex space-x-4">
      <a href="/" class="text-wesolve-green-700 hover:text-wesolve-accent-coral-500">Home</a>
      <a href="/referenzen" class="text-wesolve-green-700 hover:text-wesolve-accent-coral-500">Kunden</a>
      <a href="/leistungen" class="text-wesolve-green-700 hover:text-wesolve-accent-coral-500">Leistungen</a>
      <a href="/kontakt" class="text-wesolve-green-700 hover:text-wesolve-accent-coral-500">Kontakt</a>
    </nav>

    <!-- Mobile Menu Button -->
    <!-- <button 
      @click="open = !open" 
      class="md:hidden text-wesolve-green-700 stroke-wesolve-green-600 focus:outline-none"
      aria-label="Toggle Navigation"
    >
      <img x-show="!open" src="../assets/navigation/lines.svg" alt="Open Navigation" class="h-6 w-6">
      <img x-show="open" src="../assets/navigation/x.svg" alt="Close Menu" class="h-6 w-6">
    </button>
  </div> -->
    <!-- Hamburger Button -->
    <button 
    @click="open = !open"
    :aria-expanded="open.toString()"
    aria-controls="mobile-menu"
    aria-label="MenÃ¼ umschalten"
    class="fixed top-4 right-4 z-50 w-8 h-8 flex flex-col justify-center items-center md:hidden"
  >
    <span
      class="block w-6 h-0.5 bg-wesolve-green-700 transition-transform duration-300 ease-in-out"
      :class="open ? 'rotate-45 translate-y-1.5' : ''"
    ></span>
    <span
      class="block w-6 h-0.5 bg-wesolve-green-700 transition-all duration-300 ease-in-out my-1"
      :class="open ? 'opacity-0' : ''"
    ></span>
    <span
      class="block w-6 h-0.5 bg-wesolve-green-700 transition-transform duration-300 ease-in-out"
      :class="open ? '-rotate-45 -translate-y-1.5' : ''"
    ></span>
  </button>

  <!-- Mobile Overlay Menu -->
  <div 
    class="fixed inset-0 z-40 md:hidden pointer-events-none"
    aria-hidden="true"
  >
    <!-- Semi-transparent background -->
    <div 
      x-show="open"
      x-transition.opacity
      class="absolute inset-0 bg-black/30 backdrop-blur-sm pointer-events-auto"
      @click="open = false"
    ></div>

    <!-- Slide-in Panel -->
    <div
      id="mobile-menu"
      role="dialog"
      aria-model="true"
      tabindex="-1"
      x-show="open"
      x-transition:enter="transform transition ease-out duration-300"
      x-transition:enter-start="translate-x-full"
      x-transition:enter-end="translate-x-0"
      x-transition:leave="transform transition ease-in duration-200"
      x-transition:leave-start="translate-x-0"
      x-transition:leave-end="translate-x-full"
      class="absolute right-0 top-0 h-full w-3/4 max-w-xs bg-wesolve-gray-50 p-6 shadow-xl pointer-events-auto"
    >
      <nav class="flex flex-col space-y-4 text-lg items-end mt-16">
        <a href="/" class="text-wesolve-green-700 hover:text-wesolve-accent-coral-500">Home</a>
        <a href="/referenzen" class="text-wesolve-green-700 hover:text-wesolve-accent-coral-500">Kunden</a>
        <a href="/leistungen" class="text-wesolve-green-700 hover:text-wesolve-accent-coral-500">Leistungen</a>
        <a href="/kontakt" class="text-wesolve-green-700 hover:text-wesolve-accent-coral-500">Kontakt</a>
      </nav>
    </div>
  </div>
</div>
